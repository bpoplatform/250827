# 법인정보 및 사업연도 관리 시스템

브라우저 기반 법인정보 및 사업연도 관리를 위한 웹 애플리케이션입니다. LocalStorage를 사용하여 데이터를 관리하며, Excel 내보내기 기능을 제공합니다.

## 🚀 현재 구현된 기능

### ✅ 완료된 기능

1. **법인정보 관리**
   - 법인명 및 법인등록번호 입력/수정
   - 법인정보 조회 (법인명 또는 등록번호로 검색)
   - 법인정보 저장/삭제

2. **사업연도 관리**
   - 사업연도별 시작일/종료일 설정
   - 사업연도 여부 체크박스
   - 비고 입력
   - 다중 사업연도 행 추가/삭제

3. **데이터 유효성 검증**
   - 필수 입력 항목 검증
   - 법인등록번호 중복 검사
   - 사업연도 중복 검사
   - 날짜 형식 검증 (YYYYMMDD)
   - 날짜 범위 검증
   - 사업연도 기간 겹침 검사

4. **데이터 관리**
   - LocalStorage 기반 CRUD 기능
   - 실시간 데이터 저장/로드
   - 데이터 무결성 보장

5. **Excel 내보내기**
   - CSV 형식으로 데이터 내보내기
   - UTF-8 인코딩 지원
   - 한글 파일명 지원

6. **사용자 인터페이스**
   - 반응형 디자인
   - 실시간 유효성 검증 메시지
   - 직관적인 메뉴 구조
   - 테이블 기반 레이아웃

7. **고급 유효성 검증 (신규)**
   - 강화된 법인등록번호 형식 검증
   - 다중 레벨 중복 검사 (저장된 데이터 + 현재 화면)
   - 정밀한 날짜 겹침 검사
   - 실시간 필드별 검증
   - 상세한 오류 메시지 제공

## 📁 프로젝트 구조

```
/
├── index.html              # 메인 HTML 파일
├── css/
│   └── style.css          # 스타일시트
├── js/
│   ├── storage.js         # LocalStorage 데이터 관리
│   ├── validation.js      # 입력 유효성 검증
│   └── main.js           # 메인 애플리케이션 로직
└── README.md             # 프로젝트 문서
```

## 🔧 기능별 사용 방법

### 1. 신규 등록
- '신규' 버튼 클릭 → 폼 초기화
- 법인명, 법인등록번호 입력 (필수)
- 사업연도 정보 입력
- '저장' 버튼으로 데이터 저장

### 2. 데이터 조회
- 법인명 또는 법인등록번호 입력
- '조회' 버튼 클릭
- 기존 데이터가 폼에 로드됨

### 3. 사업연도 관리
- '행 추가' 버튼으로 새 사업연도 추가
- 체크박스로 행 선택 후 '선택행 삭제'
- 사업연도는 YYYY 형식 (예: 2024)
- 시작일/종료일은 YYYYMMDD 형식 (예: 20240101)

### 4. Excel 내보내기
- '엑셀저장' 버튼 클릭
- CSV 파일 자동 다운로드
- 파일명: 법인정보_YYYYMMDD.csv

### 5. 데이터 삭제
- 조회된 법인 선택 후 '삭제' 버튼
- 관련 사업연도 데이터도 함께 삭제

## 📊 데이터 모델

### COMPANY Table
| 필드명 | 타입 | 제약조건 | 설명 |
|--------|------|----------|------|
| COM_ID | PK, BIGINT | NOT NULL | 법인 ID (PK) |
| COM_NAME | VARCHAR(100) | NOT NULL | 법인명 |
| COM_NO_NO | VARCHAR(13) | UNIQUE, NOT NULL | 법인등록번호 |

### FISCAL_YEAR Table
| 필드명 | 타입 | 제약조건 | 설명 |
|--------|------|----------|------|
| FY_ID | PK, BIGINT | NOT NULL | 사업연도 ID (PK) |
| CORP_ID | BIGINT | FK | 법인정보 테이블 참조 |
| FISCAL_YEAR | CHAR(4) | NOT NULL | 사업연도 (YYYY) |
| START_DATE | CHAR(8) | NOT NULL | 시작일 (YYYYMMDD) |
| END_DATE | CHAR(8) | NOT NULL | 종료일 (YYYYMMDD) |
| IS_MAIN_FY | BOOLEAN | DEFAULT 0 | 사업연도여부 |
| REMARKS | VARCHAR(200) | NULL | 비고 |

## 🔍 유효성 검증 규칙

### 법인정보
- **법인명**: 필수입력, 최대 100자
- **법인등록번호**: 필수입력, 10-13자, 다음 형식 허용
  - `XXX-XX-XXXXX` (하이픈 포함)
  - `XXXXXXXXXX` (10자리 숫자)
  - `XXXXXXXXXXXX` (12-13자리 숫자)
  - 모든 자리 동일 숫자 및 연속 숫자 불허
  - 중복 등록 불가

### 사업연도 (강화된 검증)
- **사업연도**: 필수입력, YYYY 형식, 1900-2100년 범위
  - 같은 법인 내 중복 불가
  - 현재 화면에서 중복 입력 불가
- **시작일/종료일**: 필수입력, YYYYMMDD 형식, 유효한 날짜
  - 시작일은 종료일보다 빨라야 함
  - 같은 법인 내 기간 겹침 불가
  - 현재 화면의 다른 행과 기간 겹침 불가
  - 기존 저장된 데이터와 기간 겹침 불가
- **사업연도여부**: 체크박스
- **비고**: 선택입력, 최대 200자

### 실시간 검증
- 필드 입력 시 즉시 유효성 검증
- 에러 발생 시 해당 필드에 빨간색 테두리 및 메시지 표시
- 중복 및 겹침 검사는 blur 이벤트에서 실행

## 🌐 현재 기능 URI

### 메인 페이지
- **경로**: `/index.html`
- **기능**: 법인정보 및 사업연도 관리 메인 화면

### JavaScript API
- **DataStorage 클래스**: LocalStorage 기반 CRUD 작업
- **ValidationHelper 클래스**: 입력 유효성 검증
- **CorporateManagementApp 클래스**: 메인 애플리케이션 로직

## 📈 향후 개발 계획

### 🔄 미구현 기능
1. **데이터 가져오기 기능**
   - CSV/Excel 파일에서 데이터 가져오기
   - 데이터 매핑 및 검증

2. **고급 검색 기능**
   - 다중 조건 검색
   - 날짜 범위 검색
   - 페이징 처리

3. **데이터 백업/복원**
   - LocalStorage 데이터 백업
   - JSON 형태 데이터 복원

4. **사용자 설정**
   - 테마 변경
   - 언어 설정
   - 기본값 설정

5. **데이터 시각화**
   - 차트를 통한 사업연도 분석
   - 법인별 통계

### 🎯 권장 다음 단계

1. **성능 최적화**
   - 대용량 데이터 처리 개선
   - 가상 스크롤링 구현

2. **사용자 경험 향상**
   - 키보드 단축키 지원
   - 자동저장 기능
   - 실행 취소/재실행

3. **데이터 연동**
   - REST API 연동 기능
   - 실시간 데이터 동기화

## 🛠️ 기술 스택

- **Frontend**: HTML5, CSS3, JavaScript (ES6+)
- **데이터 저장**: LocalStorage
- **파일 처리**: Blob API (CSV 생성)
- **스타일링**: 순수 CSS (반응형 디자인)

## 📋 브라우저 지원

- Chrome 60+
- Firefox 60+
- Safari 12+
- Edge 79+

## 🚀 실행 방법

1. 프로젝트 파일을 웹 서버에 배치
2. 브라우저에서 `index.html` 접근
3. 로컬 환경에서도 직접 실행 가능 (file:// 프로토콜)

## 📝 참고 사항

- 데이터는 브라우저의 LocalStorage에 저장됩니다
- 브라우저 데이터 삭제 시 저장된 정보가 사라집니다
- Excel 내보내기는 CSV 형식으로 제공됩니다
- 최신 브라우저 사용을 권장합니다

---

**개발 완료일**: 2025-08-27  
**버전**: 1.0.0  
**라이선스**: MIT